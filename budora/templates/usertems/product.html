{% extends 'usertems/base.html' %}
{% load static %}
{% block content %}

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <!-- Spinner Start -->
    <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;"></div>
    </div>
    <!-- Spinner End -->

    <div class="container-xxl py-1">
        <div class="container">
            <div class="row">
                <div class="col-lg-5 wow fadeIn" data-wow-delay="0.1s">
                    <div>
                        <h3 class="display-8">{{ product.product_name }} ({{ product.product_sci_name }})<h3>
                    </div>
                    {% if product.product_image %}
                    <img src="{{ product.product_image.url }}" alt="{{ product_summary.product_name }}" style="height: 400px;"> 
                     
                    {% else %}
                    <img src="{% static 'images/noim2.png' %}" alt="No Image" style="height: 400px;">  
                                            
                    {% endif %}
                    <h5 style="font-weight:lighter;">Description :</h5>        
                    <p class="mb-4">{{ product.product_description }}</p> 
                </div>
                
                <div class="col-lg-6 wow fadeIn" data-wow-delay="0.5s">
                    
                    {% comment %} <p class="mb-2">Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna. Tempor erat elitr rebum at clita.</p> {% endcomment %}
                    
                    <h5 style="font-weight:lighter; margin-top:50px;">Growing Conditions :</h5>        
                    {% comment %} <a href="" class="btn btn-primary rounded-pill py-3 px-4" style="margin-top:20px;">Read More</a> {% endcomment %}
                    <div class="row g-4 mb-5" style="margin-top:10px;">
                        <div class="col-sm-6">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0 btn-lg-square bg-white text-primary rounded-circle me-3">
                                    <i class="bi bi-geo"></i>
                                </div>
                                
                                <span class="text-dark">{{ product.soil_type }} </span>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0 btn-lg-square bg-white text-primary rounded-circle me-3">
                                    <i class="bi bi-sun"></i>
                                </div>
                                <span class="text-dark">{{ product.light_requirements }} </span>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0 btn-lg-square bg-white text-primary rounded-circle me-3">
                                    <i class="bi bi-droplet"></i>
                                </div>
                                <span class="text-dark">{{ product.water_requirements }} </span>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0 btn-lg-square bg-white text-primary rounded-circle me-3">
                                    <i class="bi bi-cloud"></i>
                                </div>
                                <span class="text-dark">{{ product.humidity_requirements }} </span>
                            </div>
                        </div>
                        <div class="col-sm-8">
                            <div class="d-flex align-items-center">
                                {% if user.is_authenticated %}

                                      
                                            {% if is_in_wishlist %}
                                            <form method="post" action="{% url 'remove_productwishlist' product.id %}">
                                                {% csrf_token %}
                                                <button class="btn btn-dark rounded-pill py-2 px-4 m-2" style="text-shadow: rgba(1, 1, 1, 0.25) 0px 14px 28px, rgba(1, 1, 1, 0.22) 0px 3px 3px;" type="submit"><i class="bi bi-heart-fill"></i> Added to Wishlist</button>
                                            </form>
                                            {% else %}
                                            <form method="post" action="{% url 'add_productwishlist' product.id %}">
                                                {% csrf_token %}
                                                <button class="btn btn-dark rounded-pill py-2 px-4 m-2" style="text-shadow: rgba(1, 1, 1, 0.25) 0px 14px 28px, rgba(1, 1, 1, 0.22) 0px 3px 3px;" type="submit"><i class="bi bi-heart"></i> Add to Wishlist</button>
                                            </form>
                                            {% endif %}
                                  

                                {% endif %}
                                <form >
                                    <a class="btn btn-dark rounded-pill py-2 px-4 m-2" style="text-shadow: rgba(1, 1, 1, 0.25) 0px 14px 28px, rgba(1, 1, 1, 0.22) 0px 3px 3px; margin-top:-30px;" href="#stores" >Stores <i style="margin-left:10px;" class="fa fa-arrow-right"></i></a>
                                </form>
                            </div>
                        </div>
                    </div>

                    

                    <h5 style="font-weight:lighter;">Toxixity :</h5>        
                    <p class="mb-4">{{ product.toxicity_information }}</p> 
                    <h5 style="font-weight:lighter;">Maintanence :</h5>        
                    <p class="mb-4">{{ product.maintenance_instructions }}</p> 
                
            </div>
        </div>
    </div>
        <!-- Store Start -->
        <div class="container-xxl py-5" id="stores">
            <div class="section-title text-center mx-auto wow fadeInUp" data-wow-delay="0.1s" style="max-width: 500px;">
                <p class="fs-5 fw-medium fst-italic text-primary">Stores</p>
                <h4 class="display-8">Find the perfect store to your liking</h4>
            </div>
            <div class="row g-4">
                {% for seller in sellers_with_product %}
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="store-item position-relative text-center">
                       {% comment %} {% if product.product_image %} {% endcomment %}
                        <img src="{% static "images/54.jpeg" %}" alt="{{ seller.storename }}"  class="img-fluid" style="height:200px;">                      
                        {% comment %} {% else %}
                        <img src="{% static 'images/noim2.png' %}" alt="No Image"  class="img-fluid" style="height: 400px;">                      
                        {% endif %} {% endcomment %}
                        <div class="p-4">
                            <h5 class="mb-3 text-primary">{{ seller.storename }}</h5>
                            <div class="text-center mb-3">
                                {% comment %} {% for review in allreviews %}
                                {% with avg_rating_rounded=avg_rating|default:0|floatformat:"0" %}
                                    {% for i in "12345" %}
                                        {% if i <= avg_rating_rounded %}
                                            <small class="fa fa-star text-primary" ></small>
                                        {% else %}
                                            <small class="fa fa-star text-light" ></small>
                                        {% endif %}
                                    {% endfor %}
                                {% endwith %}
                                {% endfor %} {% endcomment %}
                            </div>
                            <p class="mb-3"><i class="bi bi-telephone text-primary" style="margin-right:10px;"></i>{{ seller.contact }}</p>
                            <p class="mb-3"><i class="bi bi-geo text-primary" style="margin-right:10px;"></i>{{ seller.address }}</p>
                        </div>
                        <div class="store-overlay">
                            {% for i in product_details %}
                            {% if i.seller.storename == seller.storename %}
                            
                        <p style="text-shadow: rgba(1, 1, 1, 0.25) 0px 14px 28px, rgba(1, 1, 1, 0.22) 0px 3px 3px;  background-color:#88B44E; padding-top:12px;padding-bottom:12px;width:120px;border-radius:30px;"><i class="bi bi-tree" style="color:white;">{{ i.product_stock }}</i></p>
                        <p style="text-shadow: rgba(1, 1, 1, 0.25) 0px 14px 28px, rgba(1, 1, 1, 0.22) 0px 3px 3px;  background-color:#88B44E; padding-top:12px;padding-bottom:12px;width:120px;border-radius:30px;"><i style="color:white;">Price : {{ i.product_price }}</i> </p>
                    {% comment %} id=i.pk     {% endcomment %}
                    
                                            
                        <a href="{% url 'seller_detail' seller.id i.pk%}" class="btn rounded-pill py-2 px-4 m-2" id="anybtn">More Details<i class="fa fa-arrow-right ms-2"></i></a>
                        {% endif %}  
                        {% endfor %}
                            {% comment %} <a href="" class="btn btn-dark rounded-pill py-2 px-4 m-2">Add to Cart <i class="fa fa-cart-plus ms-2"></i></a> {% endcomment %}
                                                    {% comment %} {% if product_summary.product_summaries.total_stock > 0 %}
                            <p>Stock Left</p>
                            <h4 class="text-primary">{{ product.total_stock }}</h4>
                            {% else %}
                            <p>_ _ _ _</p>
                            <h4 class="text" style="color:red;">OUT OF STOCK</h4>
                            {% endif %} {% endcomment %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>












        
        </div>
        <!-- Store End -->
    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square rounded-circle back-to-top"><i class="bi bi-arrow-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'lib/wow/wow.min.js' %}"></script>
    <script src="{% static 'lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>

    <!-- Template Javascript -->
    <script src="{% static 'js/main.js' %}"></script>
  {% endblock %}

</body>

</html>

